<!-- Fondo de la página de registro -->
<div class="fondo">
  <div class="borde">   <!--Borde bajo el título para mejor estética -->
    <h1 class="titulo">Regístrate</h1> <!-- Título de la página -->
  </div>

  <div class="bloque-registro">   <!-- Clase para bloque de registro de usuario -->

    <!-- Pantalla para revisar tu correo -->
    <div *ngIf="esperandoverificacion; else formularioregistro" class="formulario">
      <p style="margin-top: 10px;">{{ aviso }}</p>

      <p *ngIf="error" style="margin-top: 10px;">{{ error }}</p>  

      <!-- Boton para verificar cuenta y para poder revisar el correo -->
      <div class="botones" style="margin-top: 16px;">
        <button
          type="button"
          class="btn"
          (click)="yaverifique()"
          [disabled]="cargando">
          Ya verifiqué, Revisar
        </button>
        
        <!-- Botón para reenviar correo -->
        <button
          type="button"
          class="btn"
          (click)="reenviarcorreo()"
          [disabled]="cargando">
          Reenviar Correo
        </button>
        
        <!--Enlace que te lleva a la página de inicio -->
        <a routerLink="/inicio">
          <button type="button" class="btn">Volver a Inicio</button>
        </a>
      </div>
      
      <!-- Mensaje informativo luego de registrarse-->
      <p style="margin-top: 12px;">
        Cuando verifiques tu correo, te enviaremos automáticamente al Mapa.
      </p>
    </div>

    <!--  Formulario con restricciones para el correo electrónico -->
    <ng-template #formularioregistro>
      <form class="formulario" (ngSubmit)="registrar()">

        <label for="email">Correo electrónico:</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="ejemplo@correo.com"
          [(ngModel)]="email"
          required
        />

        <!-- Formulario con restricciones para ingresar número telefónico -->
        <label for="numero">Número: (+56)</label>
        <input
          type="text"
          id="numero"
          name="numero"
          maxlength="9"
          minlength="9"
          placeholder="9 1234 5678"
          [(ngModel)]="numero"
          (input)="solonumeros()"
          required
        />

        <!-- Formulario con restricciones para ingresar nombre de usuario -->
        <label for="user">Nombre de Usuario:</label>
        <input
          type="text"
          id="user"
          name="user"
          placeholder="usuario_ejemplo123"
          maxlength="30"
          minlength="3"
          [(ngModel)]="usuario"
          required
        />
        
        <!-- Formulario con restricciones para ingresar contraseña -->
        <label for="contraseña">Contraseña:</label>
        <input
          type="password"
          id="contraseña"
          name="contraseña"
          placeholder="********"
          minlength="8"
          [(ngModel)]="password"
          required
        />

        <!-- Mensaje de contraseña -->
        <p *ngIf="password && mensajepassword(password)" style="margin-top: 8px;">
          {{ mensajepassword(password) }}
        </p>

        <!-- Formulario para ingresar sector de vivienda -->
        <label for="sector">Sector de vivienda:</label>
        <input
          list="sectores"
          id="sector"
          name="sector"
          [(ngModel)]="sector"
          required
        />
        <!-- Lista desplegable de los sectores -->
        <datalist id="sectores">
          <option value="Achupallas"></option> 
          <option value="Chorrillos"></option>
          <option value="Forestal"></option>
          <option value="Glorias Navales"></option>
          <option value="Gómez Carreño"></option>
          <option value="Miraflores"></option>
          <option value="Nueva Aurora"></option>
          <option value="Recreo"></option>
          <option value="Reñaca"></option>
          <option value="Reñaca Alto"></option>
          <option value="Santa Ines"></option>
          <option value="Viña centro"></option>
        </datalist>

        <!-- Mensajes de error -->
        <p *ngIf="error" style="margin-top: 10px;">{{ error }}</p>

        <!-- Botones de acción para registrarse -->
        <div class="botones">
          <button type="submit" class="btn" [disabled]="cargando">
            {{ cargando ? 'Cargando...' : 'Registrarse' }}
          </button>

          <!-- Enlaces para iniciar sesión o volver a inicio -->
          <a routerLink="/iniciarsesion">
            <button type="button" class="btn">Iniciar Sesión</button>
          </a>

          <a routerLink="/inicio">
            <button type="button" class="btn">Volver a Inicio</button>
          </a>
        </div>
      </form>
    </ng-template>

  </div>
</div>
