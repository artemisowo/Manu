<div class="fondo">

  <!-- Header verde -->
  <header>

    <!-- Menú de navegación -->
    <div class="menu-nav-mapa" id="menu-nav-mapa">

      <!-- Botón de registro/perfil según si está logueado -->
      <a *ngIf="!logueado" routerLink="/registro">Regístrate</a>
      <a *ngIf="logueado" routerLink="/perfil">Perfil</a>

      <!-- Botón de filtros de animales -->
      <a (click)="$event.stopPropagation(); mostrarFiltros = !mostrarFiltros">
        Filtrar
      </a>

      <!-- Botón para volver al inicio -->
      <a routerLink="/inicio">Volver al Inicio</a>
    </div>
  </header>

  <!-- PANEL DE FILTROS FLOTANTE -->
  <div class="filtros-dropdown" *ngIf="mostrarFiltros" #contenedorFiltros>

    <!-- Campos de filtro -->
    <div class="campo-filtro">
      <label for="edad-min">Edad mín</label>
      <input
        type="number"
        [(ngModel)]="filtroEdadMin"
        (ngModelChange)="onCambiarFiltros()"
        id="edad-min"
        max="30"
        min="0"
        inputmode="numeric"
      />
    </div>

    <!-- Campo edad máxima -->
    <div class="campo-filtro">
      <label for="edad-max">Edad máx</label>
      <input
        type="number"
        [(ngModel)]="filtroEdadMax"
        (ngModelChange)="onCambiarFiltros()"
        id="edad-max"
        max="30"
        min="0"
        inputmode="numeric"
      />
    </div>

    <!-- Campo salud -->
    <div class="campo-filtro">
      <label for="salud">Salud</label>
      <select
        [(ngModel)]="filtroSalud"
        (ngModelChange)="onCambiarFiltros()"
        id="salud"
      >
        <option value="TODOS">TODOS</option>
        <option value="ENFERMO">Enfermo</option>
        <option value="SALUDABLE">Saludable</option>
      </select>
    </div>

    <!-- Campo personalidad -->
    <div class="campo-filtro">
      <label for="personalidad">Personalidad</label>
      <select
        [(ngModel)]="filtroPersonalidad"
        (ngModelChange)="onCambiarFiltros()"
        id="personalidad"
      >
        <option value="TODOS">TODOS</option>
        <option value="Se desconoce">Se desconoce</option>
        <option value="Dócil / Amable">Dócil / Amable</option>
        <option value="Agresivo">Agresivo</option>
        <option value="Temeroso / Con miedo">Temeroso / Con miedo</option>
      </select>
    </div>

    <!-- Campo solo míos -->
    <label class="checkbox">
      <input
        type="checkbox"
        [(ngModel)]="filtroSoloMios"
        (change)="onCambiarFiltros()"
      />
      Subido por mí
    </label>

    <!-- Botón para limpiar filtros -->
    <button
      type="button"
      class="btn-limpiar"
      (click)="limpiarFiltros()"
    >
      LIMPIAR CAMPOS
    </button>

  </div>

  <!-- Cuerpo del componente -->
  <main class="cuerpo">

    <!-- Inserción de mapa -->
    <div id="map"></div>

    <!-- Botón flotante para abrir popup de crear animal -->
    <div class="btn-menu-botones" (click)="abrirPopup()">
      <span class="boton">+</span>
    </div>

    <!-- Popup para crear/editar animal -->
    <app-popup
      *ngIf="mostrarPopup"
      [visible]="mostrarPopup"
      [modo]="modopopup"
      [animal]="animalparaeditar"
      [ubicacion]="{ lat: selectedLat, lng: selectedLng }"
      (cerrar)="cerrarPopup()"
      (ingresar)="guardarAnimal($event)"
    >
    </app-popup>
  </main>
</div>
